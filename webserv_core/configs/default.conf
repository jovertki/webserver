server {
# обязательный параметр должен быть один
# 	listen	8080;
	listen	4041;

# 	обязательное поле
	host 127.0.0.1;

# вопрос - может нам ограничить дублирующиеся сервера? Типа два без имени с одинаоквыми пост/хост не должны быть
# не должно быть одинаковых имен у разн серверов но имени может не быть вовсе
	server_name localhost;
# 	server_name localhost;


	cgi	.php /usr/bin/php-cgi7.2;
	cgi .rb /usr/bin/ruby2.5;
# 	cgi	.php /usr/bin/php-cgi7.2;

# этот локейшн у нас должен быть всегда и относится к руту #default
    location / {

#   в дефолтном обязательно должны быть:
# 	это поле заменит путь / на своё значение
	root	./html/;
# 	root	./www/;
	autoindex	on;
	index   index.html;
# 	body_size 2222222;
	body_size 2222222;
# 	body_size -1;
	upload_path /forms/;
	allow_methods	GET POST;

#   не обязательные
	error_page	10000000	./www/error_pages/error_10000000.html;
# 	error_page	-1	./www/error_pages/error_10000000.html;
    error_page	22	./www/error_pages/error_10000000.html;
#  нужно проверить чтобы его не было в дефолтном локейшне
#     return 222 /forms/upload.html;
    }

#  root не копируется далее, поэтому при любом руте в локейшне нужно будет добавлять путь от дефолтного рута
# если есть рут в лок /some/ то он его заменит и еще добавим путь от дефолтного
# также не наследуется upload_path, если его нет в потомке то берем по дефолту

#   если это файл а не /, то индекса не должно быть
	location /forms/upload.html {
# 	index   index.html;
    allow_methods	GET POST;
    body_size	200000;
#     return 222 /forms/upload.html;
	}

	location /upload/ {
		autoindex	on;
		allow_methods	GET DELETE;
		error_page	2222	./www/error_pages/error_10000000.html;
	}

	location /upload/find/ {
    		autoindex	off;
    		allow_methods	GET;
    		error_page	22222221	./www/error_pages/error_10000000.html;
    	}

# если есть ретурн то ничего не допзаполняется
	location /c/t/ {
    	return	303 http://cwd.localhost:8080/;
    }

    location /c/ {
        error_page 123433 ./www/error_pages/error_10000000.html;
    }

}

server {
# обязательный параметр должен быть один
# 	listen	8080;
	listen	8081;

# 	обязательное поле
	host 127.0.0.1;

# вопрос - может нам ограничить дублирующиеся сервера? Типа два без имени с одинаоквыми пост/хост не должны быть
# не должно быть одинаковых имен у разн серверов но имени может не быть вовсе
	server_name localhost1;
# 	server_name localhost;


	cgi	.php /usr/bin/php-cgi7.2;
	cgi .rb /usr/bin/ruby2.5;
# 	cgi	.php /usr/bin/php-cgi7.2;

# этот локейшн у нас должен быть всегда и относится к руту #default
    location / {

#   в дефолтном обязательно должны быть:
# 	это поле заменит путь / на своё значение
	root	./html/;
# 	root	./www/;
	autoindex	on;
	index   index.html;
# 	body_size 2222222;
	body_size 2222222;
# 	body_size -1;
	upload_path /forms/;
	allow_methods	GET POST;

#   не обязательные
	error_page	10000000	./www/error_pages/error_10000000.html;
# 	error_page	-1	./www/error_pages/error_10000000.html;
    error_page	22	./www/error_pages/error_10000000.html;
#  нужно проверить чтобы его не было в дефолтном локейшне
#     return 222 /forms/upload.html;
    }

#  root не копируется далее, поэтому при любом руте в локейшне нужно будет добавлять путь от дефолтного рута
# если есть рут в лок /some/ то он его заменит и еще добавим путь от дефолтного
# также не наследуется upload_path, если его нет в потомке то берем по дефолту

#   если это файл а не /, то индекса не должно быть
	location /forms/upload.html {
# 	index   index.html;
    allow_methods	GET POST;
    body_size	200000;
#     return 222 /forms/upload.html;
	}

	location /upload/ {
		autoindex	on;
		allow_methods	GET DELETE;
		error_page	2222	./www/error_pages/error_10000000.html;
	}

	location /upload/find/ {
    		autoindex	off;
    		allow_methods	GET;
    		error_page	22222221	./www/error_pages/error_10000000.html;
    	}

# если есть ретурн то ничего не допзаполняется
	location /c/t/ {
    	return	303 http://cwd.localhost:8080/;
    }

    location /c/ {
        error_page 123433 ./www/error_pages/error_10000000.html;
    }

}


# # минимальные параметры чтобы сервер запустился
# server {
# 	listen	8081;
# 	host 127.0.0.1;
# # 	server_name localhost;

# 	location / {
# 		autoindex on;
# 		root	./html/;
# 		index   index.html;
# 		body_size 2222222;
# 		upload_path forms/;
# 		allow_methods GET;
# 	}
# }

# # server {
# # 	listen	8080;
# # 	host 127.0.0.1;
# # 	server_name	cwd.localhost;
# # # 	server_name localhost;

# # 	location / {
# # 	root ./;
# # 	autoindex on;
# # 	index   index.html;
# # 	body_size 2222222;
# # 	upload_path forms/;
# # 	allow_methods GET;
# # 	}
# # }
